<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" th:href="@{/css/announceDetail.css}">
  <!--<link rel="stylesheet" th:href="@{/css/layout-usermypage-side.css}">-->

<th:block th:replace="~{./include/layout :: setContent(~{:: .announceDetail})}">


  <!-- 상단 혹은 좌측 메뉴바 -->  
  <div class="announceDetail"> <!-- innerWrap -->

   <div class="announceDetail-wrap">
      
   <!--   <div> sidebar
         <th:block th:replace="~{./include/layout-usermypage-side}"></th:block>
      </div>
-->
      <!-- 본문 -->
      <div class="announceInner">

       <div class="announceTitle"> <!-- 게시판 타이틀 -->
         <p>모집 공고</p>
       </div>



    <!-- innerBox -->

      <div class="announceBox"  id="printableArea" >
		<div class="printBtn">
		  <a href="javascript:void(0);" onclick="printPageArea('printableArea')" >
			<img src="/img/printbtn.gif" alt="인쇄">
		  </a>
		</div>
		<form name="actionForm" action="actionForm" method="post">
			<input type="hidden" name="announce_proper_num" th:value="${vo.announce_proper_num}">
			
	        <table class="annouonceTable">
	          <tbody class="board">
	            <tr id="boardTitle"> <!-- class="boardTitle" -->
	              <th class="title">제목</th>
	              <td  class="tdtitle">[[${vo.announce_title}]]</td>
	            </tr>
	
	  			<tr>
	              <th class="startDate">모집 시작일</th>
	              <td >
					  <span th:text="${vo.announce_start_date}">[[${vo.announce_start_date}]]</span>
	              </td>   
	              
	              <th class="modifyDate">모집 종료일</th>
	              <td  class="tdsize"><span th:text="${vo.announce_end_date}">[[${vo.announce_end_date}]]</span></td>                               
	            </tr> <!--td colspan="2"--> 
	    
	            <tr>
	              <th class="startDate">최초 공고 등록</th>
	              <td><span th:text="${vo.announce_first_date}" id="formattedAnnounceFirstDate">[[${vo.announce_first_date}]]</span></td>              
	              <th class="modifyDate">최종 수정 일시</th>
	              <td class="tdsize"><span th:text="${vo.announce_last_date}">[[${vo.announce_last_date}]]</span></td>        
	            </tr>  <!--td colspan="2"--> 
	        
	            <tr>
	              <th class="file">첨부파일</th>
	              <td>					
                      <td class="left" colspan="5" th:each="vo : ${filevo}">
                         <a th:href="@{'https://court-supporter-project-t4.s3.ap-northeast-2.amazonaws.com/' + ${vo.file_path} + ${vo.announce_file_uuid} + '_' + ${vo.original_file_name}}">[[${vo.original_file_name}]]</a><br>
                      </td>                        
				  </td>
	            </tr>
	 		 </tbody>
	
	        </table> 
	            <div class="announceContent">
	             <!-- <th class="con">내용</th>-->
	              <div class="innerContent"  th:utext="${vo.announce_content}">	<!-- th:utext="${vo.announce_content}"-->				  
					<pre> [[${vo.announce_content}]]</pre>				
	              </div>
	            </div>        
	          
	             
		     <div th:if="${nextPost != null}">
			    <table class="nextTable">
			        <tbody>
			            <tr>
			                <td class="nextContent">다음글</td>
			                <td colspan="3">
			                    <a id="nextLink" class="nextTitle" th:href="@{/announce/announceDetail/(announce_proper_num=${nextPost.announce_proper_num})}" th:text="${nextPost.announce_title}"></a>
			                </td>
			            </tr>
			        </tbody>
			    </table>
			 </div>
			 
			 <div th:unless="${nextPost != null}">  <!-- 다음 글 없을 때 -->
			    <table class="nextInfo">
			        <tbody>
			            <tr>
			                <td colspan="4" class="nextTxt">다음 글이 없습니다.</td>
			            </tr>
			        </tbody>
			    </table>
			 </div>
			 
			  <div th:if="${previousPost != null}">
			    <table class="prevTable">
			        <tbody>
			            <tr>
			                <td class="prevContent">이전글</td>
			                <td colspan="3">
			                    <a id="prevLink" class="prevTitle" th:href="@{/announce/announceDetail/(announce_proper_num=${previousPost.announce_proper_num})}" th:text="${previousPost.announce_title}"></a>
			                </td>
			            </tr>
			        </tbody>
			    </table>
			 </div>
			 
			 
			  <div th:unless="${previousPost != null}"> <!-- 이전 글 없을 때 -->
			    <table class="prevInfo">
			        <tbody>
			            <tr>
			                <td colspan="4" class="prevTxt">이전 글이 없습니다.</td>
			            </tr>
			        </tbody>
			    </table>
			 </div>
	           <!-- <tr th:unless="${nextPost != null}">
                  <td colspan="4">다음 글이 없습니다.</td>
          		</tr>-->
          		
	          </tbody>
	        </table> 
	        <div>
	          <button class="listBtn btn" id="listBtn">
	            <a th:href="@{/announce/announceList}">목록</a>
	          </button>
	          <button class="delBtn btn"  id="deleteBtn">
	            <a href="#" >삭제</a> <!-- id="deleteBtn"-->
	          </button>
	          <button class="modifyBtn btn" id="modifyBtn">
	            <a th:href="@{/announce/announceModify(announce_proper_num=${vo.announce_proper_num})}">수정</a>
	          </button>
	        </div>
	       </form>
	      </div>
   
     </div>
   </div> <!--announceDetail-wrap end-->
  </div> <!--announceDetail end -->

</th:block>

<script th:inline="javascript">
	/*
        var rawAnnounceFirstDate = "${vo.announce_first_date}";
        var formattedAnnounceFirstDate = rawAnnounceFirstDate.replace("T", " "); 

        var options = { year: 'numeric', month: '2-digit', day: '2-digit', hour: '2-digit', minute: '2-digit', second: '2-digit' };
        var announceDate = new Date(formattedAnnounceFirstDate);
        var formattedDate = announceDate.toLocaleDateString('ko-KR', options);

        document.getElementById("#formattedAnnounceFirstDate").innerText = formattedDate;          
       */         
</script>

<script th:inline="javascript">

	var admin = "admin_proper_num";
	//var user = "admin";
	//관리자가 아닐시 버튼 숨김
	var modifyBtn = document.getElementById("modifyBtn"); //수정버튼
	var delBtn = document.getElementById("deleteBtn"); //삭제버튼
	if (admin_proper_num === "1") {
	    //관리자일 경우 모든 버튼을 보이게
	    modifyBtn.style.display = "block";
	    delBtn.style.display = "block";	    
	} else {
	    //관리자 제외 버튼을 숨김
	    modifyBtn.style.display = "none";	    
	    delBtn.style.display = "none";	    
	}	
		
</script>

<script th:inline="javascript"> 
	
	function printPageArea(areaID){
	    var printContent = document.getElementById(areaID).innerHTML;
	    var originalContent = document.body.innerHTML;
	    document.body.innerHTML = printContent;
	    window.print();
	    document.body.innerHTML = originalContent;
	}
</script>

<script th:inline="javascript"> 
	
	//작성취소 - 목록으로 돌아가기
	let listBtn = document.getElementById("listBtn");
	listBtn.onclick = () => {
		event.preventDefault();
		window.location.href = "/announce/announceList";
	}
	
	// 삭제 기능
	let deleteBtn = document.getElementById("deleteBtn");
	deleteBtn.onclick = () => {		
		event.preventDefault();		
		if(confirm("삭제하시겠습니까?")){
			document.actionForm.action = "deleteForm"; //action변경 
			document.actionForm.submit();			
		}
	}
	
</script>

</html>